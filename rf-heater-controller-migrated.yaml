esphome:
  name: cc1101-cale-rf
  friendly_name: Control cale RF

esp32:
  board: esp32dev

# External components configuration
external_components:
  - source:
      type: local
      path: components

# SPI configuration for CC1101
spi:
  clk_pin: 18
  miso_pin: 19
  mosi_pin: 23

wifi:
  ssid: !secret wifi_name
  password: !secret wifi_pass
  fast_connect: true
  power_save_mode: HIGH

logger:
  level: VERBOSE

api:
  encryption:
    key: !secret key

esp32_ble_tracker:

bluetooth_proxy:

ota:
  platform: esphome

web_server:
  port: 80

# CC1101 component configuration
cc1101:
  id: transciver
  cs_pin: 15
  gdo0_pin: 21
  bandwidth: 200.0
  frequency: 868.4

# Optional: CC1101 sensor for RSSI monitoring
sensor:
  - platform: cc1101
    cc1101_id: transciver
    rssi: false
    internal: true

remote_transmitter:
  - id: transmitter
    pin:
      number: 21 # GDO0
      allow_other_uses: true
    carrier_duty_percent: 100%

remote_receiver:
  - id: receiver
    pin:
      number: 21 # GDO0
      allow_other_uses: true
    dump:
      - raw
    filter: 100us
    tolerance: 20%

button:
  - platform: template
    name: "Heater ON"
    on_press:
      - lambda: get_cc1101(id(transciver))->begin_transmission();
      - remote_transmitter.transmit_raw:
          code: [447, -383, 431, -408, 409, -410, 435, -413, 411, -209, 213, -185, 213, -212, 210, -211, 209, -209, 209, -208, 208, -386, 231, -208, 411, -207, 209, -209, 209, -411, 408, -208, 209, -210, 210, -412, 408, -208, 210, -414, 207, -210, 412, -410, 434, -183, 238, -388, 435, -385, 436, -410, 410, -235, 187, -415, 410, -413, 410, -409, 433, -407, 406, -207, 214, -420, 209, -213, 411, -407, 430, -391, 421, -416, 417, -424, 400, -204, 232, -385, 432, -206, 211, -412, 408, -208, 210, -210, 210, -413, 408, -411, 437, -385, 435, -410, 409, -409, 236, -190, 411, -415, 196, -215, 412, -201, 225, -202, 204, -206, 205, -207, 232, -182, 233, -384, 230, -210, 209, -182, 436, -206, 208, -209, 208, -209, 208, -411, 205, -210, 234, -185, 209, -181, 233, -182, 232, -182, 233, -182, 233, -181, 233, -182, 233, -207, 208, -182, 435, -206, 208, -208, 209, -208, 208, -208, 207, -182, 233, -182, 232, -410, 206, -208, 410, -207, 209, -209, 210, -412, 408, -207, 210, -210, 211, -412, 408, -207, 210, -414, 206, -210, 412, -410, 435, -183, 211, -416, 410, -410, 435, -409, 410, -235, 187, -417, 411, -412, 410, -408, 433, -406, 406, -207, 214, -407, 235, -185, 409, -414, 428, -398, 440, -392, 419, -425, 403, -204, 233, -410, 407, -207, 211, -413, 408, -207, 211, -210, 211, -413, 408, -411, 436, -410, 410, -409, 409, -408, 235, -190, 411, -415, 224, -191, 412, -225, 201, -203, 204, -205, 206, -206, 233, -181, 233, -384, 231, -209, 209, -208, 410, -206, 208, -209, 208, -209, 208, -411, 205, -208, 235, -184, 210, -182, 233, -207, 207, -208, 207, -208, 207, -181, 233, -182, 233, -207, 208, -182, 436, -206, 207, -209, 208, -209, 207, -208, 208, -207, 208, -182, 233, -410, 205, -208, 411, -206, 209, -209, 209, -411, 408, -207, 210, -210, 211, -413, 408, -207, 210, -413, 206, -210, 413, -409, 435, -183, 238, -389, 411, -411, 435, -409, 410, -235, 189, -412, 414, -416, 417, -397, 425, -405, 431, -206, 209, -411, 206, -210, 411, -409, 435, -385, 435, -409, 410, -408, 434, -209, 214, -386, 433, -209, 213, -386, 433, -208, 214, -213, 187, -418, 410, -412, 435, -407, 408, -414, 405, -439, 207, -186, 435, -401, 206, -212]
      - delay: 120ms
      - remote_transmitter.transmit_raw:
          code: [453, -409, 409, -411, 436, -409, 410, -409, 409, -208, 215, -191, 214, -216, 214, -192, 216, -195, 223, -202, 204, -408, 230, -208, 409, -206, 208, -210, 208, -412, 409, -207, 210, -210, 209, -413, 408, -207, 210, -413, 206, -210, 412, -410, 435, -209, 193, -414, 405, -426, 416, -418, 417, -198, 198, -425, 429, -408, 407, -409, 434, -385, 435, -209, 192, -412, 231, -191, 410, -418, 418, -424, 402, -406, 432, -409, 409, -207, 211, -415, 409, -234, 185, -417, 207, -210, 413, -410, 435, -410, 410, -412, 410, -209, 213, -213, 213, -388, 436, -413, 410, -412, 409, -209, 216, -190, 215, -215, 191, -216, 215, -195, 222, -402, 228, -181, 233, -183, 234, -182, 434, -409, 409, -410, 410, -410, 436, -210, 212, -185, 213, -211, 210, -210, 209, -209, 208, -209, 208, -208, 207, -208, 208, -410, 205, -209, 208, -209, 208, -208, 208, -207, 208, -182, 233, -207, 409, -206, 208, -412, 206, -209, 209, -209, 411, -408, 207, -210, 237, -184, 412, -409, 207, -210, 412, -208, 210, -412, 408, -412, 234, -185, 414, -411, 436, -410, 410, -412, 236, -167, 437, -400, 424, -418, 418, -395, 425, -404, 229, -208, 409, -205, 209, -411, 408, -410, 435, -413, 410, -412, 410, -412, 209, -193, 437, -400, 226, -191, 410, -222, 195, -423, 403, -433, 407, -410, 434, -412, 209, -185, 212, -211, 413, -410, 435, -410, 410, -409, 209, -193, 213, -216, 214, -192, 215, -192, 217, -222, 400, -204, 232, -182, 232, -182, 232, -410, 407, -409, 409, -412, 435, -409, 209, -212, 213, -185, 212, -211, 211, -210, 209, -209, 208, -209, 208, -207, 208, -209, 409, -206, 208, -209, 208, -208, 208, -209, 207, -208, 207, -208, 207, -410, 206, -208, 410, -207, 209, -209, 209, -411, 408, -207, 210, -210, 211, -412, 408, -207, 210, -413, 206, -210, 413, -411, 409, -208, 238, -389, 410, -410, 435, -409, 409, -235, 190, -411, 415, -415, 418, -397, 425, -406, 431, -206, 208, -412, 206, -210, 411, -410, 410, -411, 435, -412, 411, -412, 409, -209, 215, -412, 416, -199, 215, -414, 198, -224, 401, -407, 432, -408, 409, -412, 435, -209, 213, -185, 212, -413, 409, -410, 435, -409, 409, -210, 215, -191, 214, -215, 191, -215, 216, -195, 222, -403]
      - delay: 120ms
      - remote_transmitter.transmit_raw:
          code: [437, -415, 411, -410, 410, -414, 435, -389, 434, -210, 214, -187, 214, -214, 214, -186, 212, -212, 211, -210, 209, -388, 231, -208, 411, -207, 209, -210, 209, -387, 434, -208, 210, -210, 209, -387, 432, -208, 210, -413, 207, -210, 413, -411, 409, -208, 212, -415, 409, -411, 435, -410, 411, -209, 216, -387, 438, -391, 442, -396, 424, -405, 430, -206, 209, -413, 206, -209, 412, -410, 409, -412, 437, -387, 435, -413, 411, -210, 191, -411, 428, -233, 186, -214, 214, -381, 427, -421, 419, -393, 445, -402, 428, -180, 234, -182, 234, -386, 432, -410, 410, -411, 436, -184, 238, -186, 212, -211, 211, -210, 208, -183, 234, -385, 230, -209, 235, -158, 438, -206, 208, -411, 408, -411, 410, -412, 436, -184, 239, -186, 211, -211, 210, -210, 209, -183, 234, -182, 233, -182, 234, -181, 234, -386, 230, -182, 234, -183, 234, -182, 233, -182, 234, -181, 233, -182, 435, -206, 208, -412, 206, -209, 210, -209, 411, -408, 207, -210, 211, -211, 412, -408, 207, -210, 412, -208, 210, -413, 408, -410, 234, -186, 415, -411, 436, -386, 436, -410, 236, -166, 437, -401, 423, -390, 441, -396, 424, -405, 229, -181, 437, -206, 209, -412, 408, -410, 435, -388, 436, -411, 411, -413, 211, -212, 415, -388, 235, -186, 240, -186, 414, -410, 435, -385, 436, -410, 410, -414, 210, -213, 214, -186, 416, -412, 435, -388, 437, -413, 210, -192, 213, -191, 238, -191, 214, -191, 216, -196, 425, -204, 232, -208, 209, -386, 230, -208, 410, -408, 409, -411, 435, -388, 235, -186, 239, -186, 210, -210, 210, -209, 208, -183, 234, -182, 234, -182, 232, -183, 435, -206, 208, -208, 209, -182, 234, -182, 234, -181, 234, -181, 233, -385, 230, -209, 411, -206, 209, -210, 209, -387, 433, -208, 210, -210, 210, -388, 433, -208, 210, -414, 206, -209, 413, -409, 409, -208, 212, -416, 410, -412, 435, -387, 435, -210, 192, -411, 428, -397, 440, -392, 444, -401, 428, -180, 233, -385, 230, -209, 411, -410, 409, -410, 436, -388, 436, -413, 411, -209, 214, -391, 436, -210, 192, -213, 214, -412, 419, -393, 444, -400, 428, -382, 433, -208, 210, -210, 210, -412, 408, -410, 435, -387, 436, -211, 212, -186, 212, -211, 210, -210, 209, -183, 234, -386]
      - lambda: get_cc1101(id(transciver))->end_transmission();

  - platform: template
    name: "Heater OFF"
    on_press:
      - lambda: get_cc1101(id(transciver))->begin_transmission();
      - remote_transmitter.transmit_raw:
          code: [442, -396, 425, -406, 432, -409, 408, -411, 435, -184, 239, -186, 211, -211, 209, -210, 209, -183, 233, -182, 234, -385, 230, -209, 410, -207, 209, -210, 209, -411, 408, -208, 210, -210, 210, -387, 434, -207, 211, -413, 206, -210, 413, -411, 411, -208, 211, -415, 409, -411, 435, -386, 437, -210, 214, -389, 436, -388, 437, -413, 411, -414, 410, -210, 214, -418, 210, -193, 411, -403, 438, -416, 416, -398, 425, -405, 431, -207, 209, -412, 408, -207, 212, -414, 408, -208, 210, -211, 211, -413, 408, -409, 436, -385, 436, -413, 410, -414, 410, -409, 434, -184, 240, -386, 235, -187, 240, -187, 214, -186, 213, -211, 210, -210, 412, -207, 210, -184, 235, -387, 231, -208, 210, -183, 234, -182, 234, -182, 233, -183, 435, -206, 210, -184, 234, -182, 232, -182, 233, -182, 233, -182, 233, -182, 232, -182, 233, -182, 233, -385, 230, -183, 234, -183, 234, -182, 234, -182, 233, -182, 233, -181, 435, -206, 208, -412, 206, -209, 209, -210, 411, -409, 206, -211, 236, -186, 412, -409, 206, -210, 412, -207, 209, -413, 408, -411, 234, -185, 414, -412, 435, -386, 436, -410, 236, -166, 437, -399, 415, -418, 417, -399, 425, -407, 230, -182, 436, -207, 208, -412, 408, -411, 436, -387, 436, -410, 411, -414, 210, -192, 437, -400, 228, -191, 408, -419, 223, -199, 201, -204, 432, -408, 408, -410, 434, -386, 436, -413, 411, -414, 413, -414, 210, -193, 435, -194, 213, -191, 214, -216, 219, -199, 202, -205, 231, -384, 255, -158, 236, -182, 436, -205, 209, -183, 234, -183, 234, -182, 234, -181, 233, -385, 230, -209, 209, -183, 234, -183, 233, -182, 233, -181, 233, -182, 234, -182, 232, -182, 233, -182, 435, -206, 208, -183, 234, -183, 233, -182, 234, -182, 234, -181, 233, -384, 230, -209, 411, -207, 209, -209, 210, -386, 433, -207, 210, -210, 211, -412, 407, -208, 210, -413, 207, -210, 412, -410, 409, -208, 212, -414, 410, -411, 437, -413, 411, -209, 213, -392, 437, -386, 435, -410, 410, -409, 434, -210, 189, -410, 220, -190, 433, -398, 425, -407, 432, -410, 409, -412, 435, -183, 219, -412, 430, -194, 214, -410, 417, -199, 221, -200, 203, -407, 432, -410, 408, -410, 435, -386, 436, -410, 410, -414, 435, -184]
      - delay: 120ms
      - remote_transmitter.transmit_raw:
          code: [439, -397, 424, -406, 431, -410, 409, -411, 436, -183, 239, -185, 212, -211, 209, -210, 209, -182, 234, -182, 234, -385, 230, -209, 411, -207, 209, -210, 209, -386, 432, -208, 209, -211, 210, -413, 408, -208, 210, -413, 206, -210, 413, -410, 409, -209, 211, -416, 410, -411, 436, -411, 410, -210, 192, -411, 438, -390, 441, -396, 423, -405, 430, -207, 208, -412, 206, -209, 413, -409, 409, -413, 436, -387, 436, -413, 411, -209, 214, -389, 437, -211, 192, -411, 235, -187, 409, -415, 429, -399, 422, -418, 416, -199, 221, -200, 203, -407, 433, -409, 408, -411, 435, -184, 219, -189, 214, -215, 214, -191, 214, -216, 219, -398, 229, -180, 233, -183, 233, -182, 434, -408, 409, -410, 435, -388, 436, -210, 192, -190, 237, -191, 214, -191, 214, -216, 219, -199, 201, -205, 231, -181, 233, -385, 230, -182, 235, -182, 234, -183, 233, -182, 233, -181, 233, -182, 434, -206, 209, -411, 206, -210, 209, -210, 410, -409, 206, -211, 236, -186, 412, -408, 206, -211, 412, -208, 209, -413, 409, -410, 234, -185, 415, -409, 436, -385, 436, -413, 237, -185, 415, -411, 410, -414, 410, -414, 411, -414, 237, -165, 436, -202, 213, -411, 418, -398, 426, -406, 432, -409, 409, -411, 234, -186, 415, -412, 234, -169, 436, -209, 213, -411, 415, -393, 445, -401, 427, -409, 206, -209, 209, -210, 410, -409, 409, -412, 435, -387, 235, -185, 239, -186, 210, -210, 210, -209, 208, -183, 436, -206, 209, -209, 210, -183, 233, -385, 432, -411, 410, -412, 435, -386, 234, -186, 239, -186, 212, -210, 210, -209, 208, -183, 234, -182, 234, -182, 233, -182, 436, -180, 233, -209, 208, -183, 233, -182, 234, -182, 233, -182, 233, -384, 230, -209, 411, -206, 209, -210, 209, -386, 433, -207, 210, -211, 210, -389, 433, -207, 210, -413, 206, -210, 412, -411, 410, -209, 211, -414, 409, -411, 435, -413, 411, -210, 213, -392, 436, -388, 436, -413, 411, -410, 435, -184, 215, -411, 219, -191, 433, -395, 424, -405, 431, -409, 409, -410, 434, -210, 193, -412, 431, -205, 189, -408, 221, -192, 439, -404, 429, -408, 408, -410, 436, -183, 239, -185, 211, -414, 408, -411, 434, -386, 435, -210, 213, -187, 212, -213, 210, -210, 210, -209, 208, -386]
      - delay: 120ms
      - remote_transmitter.transmit_raw:
          code: [438, -408, 434, -406, 414, -420, 416, -417, 420, -201, 203, -204, 230, -181, 232, -182, 232, -182, 232, -182, 233, -384, 230, -209, 411, -206, 209, -210, 209, -387, 432, -207, 210, -211, 209, -412, 408, -208, 210, -414, 206, -210, 413, -410, 410, -208, 212, -414, 434, -387, 435, -388, 437, -209, 213, -392, 438, -386, 436, -410, 410, -410, 434, -185, 215, -412, 227, -189, 434, -394, 423, -405, 430, -409, 408, -410, 435, -184, 239, -390, 435, -210, 212, -187, 210, -414, 408, -410, 435, -386, 436, -413, 411, -209, 214, -186, 240, -391, 435, -387, 436, -389, 436, -210, 192, -214, 213, -191, 214, -191, 238, -192, 220, -402, 228, -181, 233, -183, 436, -180, 234, -387, 432, -410, 434, -386, 435, -210, 193, -190, 237, -191, 214, -191, 214, -216, 219, -199, 202, -205, 232, -180, 233, -385, 230, -182, 235, -182, 234, -182, 234, -181, 233, -182, 233, -182, 435, -206, 208, -413, 206, -210, 208, -183, 437, -409, 207, -210, 210, -211, 412, -408, 206, -211, 412, -208, 210, -414, 408, -411, 234, -186, 414, -410, 435, -386, 436, -410, 210, -212, 415, -413, 411, -413, 413, -414, 410, -410, 235, -190, 412, -203, 213, -409, 418, -399, 426, -407, 431, -410, 410, -411, 235, -185, 415, -411, 234, -185, 213, -211, 413, -409, 409, -411, 434, -411, 411, -413, 210, -213, 214, -187, 415, -412, 436, -388, 436, -410, 210, -192, 213, -192, 237, -191, 214, -191, 217, -196, 426, -204, 232, -207, 209, -386, 230, -208, 411, -409, 409, -411, 435, -388, 235, -192, 214, -191, 213, -215, 214, -191, 215, -195, 222, -202, 204, -206, 233, -181, 434, -206, 208, -183, 234, -182, 234, -182, 233, -182, 233, -182, 233, -385, 230, -209, 410, -207, 209, -210, 208, -388, 433, -207, 210, -210, 210, -388, 433, -207, 210, -413, 207, -210, 412, -410, 410, -208, 211, -415, 409, -410, 437, -388, 436, -210, 213, -391, 437, -387, 436, -410, 410, -409, 434, -192, 213, -412, 231, -186, 427, -393, 419, -425, 427, -382, 433, -410, 410, -208, 211, -415, 409, -234, 185, -213, 210, -414, 408, -411, 435, -386, 436, -410, 410, -209, 216, -190, 213, -411, 415, -419, 422, -404, 430, -206, 208, -210, 208, -182, 234, -182, 234, -182, 233, -385]
      - lambda: get_cc1101(id(transciver))->end_transmission();
