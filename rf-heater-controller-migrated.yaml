esphome:
  name: cc1101-cale-rf
  friendly_name: Control cale RF

esp32:
  board: esp32dev

# External components configuration
external_components:
  - source:
      type: local
      path: components

# SPI configuration for CC1101
spi:
  clk_pin: 18
  miso_pin: 19
  mosi_pin: 23

wifi:
  ssid: !secret wifi_name
  password: !secret wifi_pass
  fast_connect: true
  power_save_mode: HIGH

logger:
  level: VERBOSE

api:
  encryption:
    key: !secret key

esp32_ble_tracker:

bluetooth_proxy:

ota:
  platform: esphome

web_server:
  port: 80

# CC1101 component configuration
cc1101:
  id: transciver
  cs_pin: 15
  gdo0_pin: 21
  bandwidth: 200.0
  frequency: 868.4

# CC1101 sensor removed - was internal and not used
# sensor:
#   - platform: cc1101
#     cc1101_id: transciver
#     rssi: false
#     internal: true

remote_transmitter:
  - id: transmitter
    pin:
      number: 21 # GDO0
      allow_other_uses: true
    carrier_duty_percent: 100%

remote_receiver:
  - id: receiver
    pin:
      number: 21 # GDO0
      allow_other_uses: true
    dump:
      - raw
    filter: 100us
    tolerance: 20%

button:
  - platform: template
    name: "Heater ON"
    on_press:
      - lambda: get_cc1101(id(transciver))->begin_transmission();
      - remote_transmitter.transmit_raw:
          code: [439, -413, 410, -409, 435, -407, 414, -414, 415, -208, 214, -186, 241, -187, 213, -213, 213, -186, 211, -211, 210, -412, 206, -209, 412, -207, 210, -210, 209, -411, 409, -207, 211, -210, 209, -412, 409, -207, 211, -413, 206, -210, 413, -409, 436, -183, 211, -414, 434, -386, 436, -409, 413, -209, 213, -415, 412, -413, 413, -410, 410, -409, 434, -209, 214, -392, 211, -212, 418, -413, 413, -410, 435, -382, 434, -413, 414, -196, 214, -412, 423, -203, 206, -410, 432, -206, 209, -209, 208, -386, 433, -409, 411, -411, 436, -412, 413, -410, 209, -193, 437, -399, 219, -191, 433, -199, 220, -199, 201, -204, 206, -206, 232, -181, 233, -384, 256, -184, 210, -182, 436, -206, 208, -208, 209, -208, 208, -410, 206, -209, 235, -185, 209, -182, 233, -182, 233, -181, 233, -182, 233, -182, 232, -182, 233, -182, 233, -182, 436, -206, 208, -208, 208, -182, 233, -182, 234, -182, 233, -182, 233, -385, 230, -208, 411, -207, 209, -209, 209, -411, 408, -208, 210, -211, 210, -413, 407, -208, 209, -413, 206, -210, 413, -411, 410, -208, 211, -414, 434, -386, 435, -413, 413, -209, 213, -392, 437, -409, 412, -409, 410, -408, 439, -209, 214, -387, 235, -186, 415, -409, 438, -384, 438, -414, 414, -414, 414, -208, 214, -386, 439, -209, 189, -410, 420, -199, 214, -216, 218, -400, 430, -408, 408, -410, 435, -387, 437, -410, 209, -212, 417, -410, 210, -185, 442, -183, 238, -185, 211, -210, 210, -209, 209, -182, 234, -385, 257, -184, 209, -183, 437, -206, 208, -209, 208, -208, 208, -385, 231, -209, 235, -185, 209, -182, 233, -182, 233, -181, 233, -182, 233, -182, 233, -181, 233, -182, 233, -182, 435, -206, 208, -208, 209, -182, 234, -182, 233, -182, 233, -182, 233, -385, 231, -208, 411, -207, 209, -209, 209, -411, 409, -207, 210, -210, 210, -413, 408, -207, 210, -414, 206, -210, 413, -409, 410, -208, 211, -415, 409, -412, 437, -388, 437, -210, 192, -412, 429, -398, 439, -391, 419, -426, 402, -204, 233, -385, 230, -209, 411, -410, 409, -411, 436, -386, 436, -409, 411, -209, 215, -413, 414, -206, 213, -406, 415, -205, 214, -214, 214, -395, 415, -402, 441, -399, 415, -422, 419, -393, 222, -195, 422, -407, 230, -207]
      - delay: 120ms
      - remote_transmitter.transmit_raw:
          code: [440, -399, 425, -407, 432, -410, 409, -412, 436, -183, 219, -209, 215, -191, 213, -192, 214, -215, 215, -194, 221, -402, 229, -181, 435, -206, 208, -209, 208, -412, 408, -208, 209, -211, 209, -412, 409, -207, 210, -412, 207, -209, 413, -411, 410, -208, 211, -414, 435, -385, 436, -409, 411, -209, 216, -411, 415, -393, 442, -396, 423, -405, 431, -207, 209, -411, 206, -209, 412, -410, 410, -411, 437, -385, 436, -410, 410, -209, 214, -413, 413, -209, 214, -392, 235, -186, 416, -410, 436, -386, 436, -409, 410, -209, 215, -191, 213, -411, 442, -395, 422, -405, 431, -206, 208, -209, 208, -208, 208, -182, 234, -181, 234, -410, 205, -209, 208, -211, 208, -183, 435, -408, 408, -410, 435, -386, 437, -209, 213, -186, 212, -211, 211, -210, 209, -209, 208, -209, 208, -181, 234, -208, 208, -385, 230, -208, 209, -208, 208, -182, 234, -182, 234, -182, 233, -182, 435, -206, 208, -411, 206, -209, 209, -209, 411, -408, 207, -210, 210, -210, 414, -409, 206, -210, 413, -207, 210, -413, 408, -410, 234, -185, 415, -410, 436, -410, 411, -413, 236, -167, 437, -399, 414, -416, 418, -399, 426, -406, 230, -208, 410, -207, 209, -411, 409, -410, 435, -387, 437, -413, 412, -410, 210, -193, 435, -389, 244, -168, 434, -199, 224, -401, 431, -408, 408, -411, 436, -385, 235, -185, 219, -190, 437, -389, 440, -393, 444, -400, 202, -205, 232, -181, 233, -182, 232, -181, 233, -182, 435, -206, 208, -208, 210, -183, 233, -385, 433, -410, 410, -411, 436, -410, 209, -193, 213, -192, 214, -215, 214, -190, 216, -195, 224, -203, 204, -206, 232, -181, 436, -206, 208, -182, 234, -182, 233, -182, 234, -181, 234, -182, 233, -385, 230, -209, 410, -207, 209, -209, 209, -410, 408, -208, 209, -210, 211, -414, 408, -207, 210, -413, 206, -210, 413, -410, 410, -208, 212, -414, 435, -385, 436, -409, 411, -235, 191, -410, 414, -415, 416, -398, 424, -405, 432, -206, 209, -411, 206, -209, 412, -411, 410, -410, 436, -411, 411, -409, 410, -209, 214, -417, 412, -209, 213, -392, 235, -186, 415, -410, 437, -410, 412, -410, 410, -209, 216, -190, 214, -410, 440, -395, 423, -405, 431, -206, 209, -209, 208, -182, 234, -182, 234, -182, 233, -384]
      - delay: 120ms
      - remote_transmitter.transmit_raw:
          code: [441, -401, 403, -432, 407, -410, 409, -412, 437, -209, 212, -185, 212, -211, 211, -209, 209, -209, 208, -182, 234, -410, 206, -208, 411, -207, 209, -209, 209, -412, 408, -207, 210, -210, 210, -411, 409, -207, 211, -413, 207, -210, 412, -410, 410, -207, 212, -416, 410, -411, 436, -409, 411, -209, 216, -411, 414, -416, 416, -397, 425, -405, 431, -206, 208, -411, 206, -209, 411, -410, 410, -412, 436, -410, 410, -409, 410, -209, 213, -413, 413, -235, 187, -214, 214, -388, 435, -410, 413, -413, 413, -409, 435, -191, 214, -191, 215, -410, 418, -425, 402, -407, 432, -207, 209, -210, 209, -209, 209, -208, 208, -208, 208, -410, 205, -209, 234, -184, 411, -206, 209, -411, 408, -409, 436, -387, 436, -208, 213, -185, 213, -211, 210, -210, 209, -209, 209, -208, 207, -208, 208, -208, 208, -385, 230, -208, 209, -208, 208, -208, 208, -208, 208, -182, 234, -181, 435, -206, 209, -410, 206, -209, 209, -209, 412, -409, 207, -209, 237, -184, 412, -409, 207, -210, 412, -207, 210, -413, 409, -411, 235, -184, 415, -410, 435, -410, 411, -412, 237, -185, 417, -411, 412, -412, 410, -409, 434, -408, 191, -216, 409, -205, 238, -400, 417, -397, 424, -406, 432, -409, 408, -411, 234, -185, 415, -409, 234, -184, 212, -211, 413, -410, 410, -410, 436, -410, 411, -412, 211, -212, 213, -186, 416, -412, 437, -410, 412, -410, 210, -192, 213, -216, 214, -192, 214, -191, 218, -221, 402, -204, 232, -181, 233, -411, 205, -208, 411, -409, 408, -410, 436, -410, 209, -212, 213, -185, 212, -211, 210, -209, 209, -209, 208, -208, 208, -182, 233, -182, 436, -206, 208, -208, 208, -208, 208, -208, 208, -182, 234, -181, 234, -385, 230, -208, 411, -207, 209, -209, 209, -411, 409, -207, 210, -210, 211, -412, 409, -207, 210, -413, 206, -210, 412, -411, 410, -208, 212, -413, 410, -409, 436, -409, 411, -209, 216, -411, 415, -394, 442, -396, 423, -405, 431, -206, 209, -411, 206, -209, 412, -409, 409, -410, 437, -410, 412, -413, 413, -210, 215, -414, 400, -226, 190, -214, 215, -391, 425, -407, 432, -409, 410, -410, 435, -209, 193, -214, 190, -411, 440, -393, 419, -425, 403, -230, 208, -182, 234, -181, 234, -182, 233, -181, 233, -410]
      - lambda: get_cc1101(id(transciver))->end_transmission();

  - platform: template
    name: "Heater OFF"
    on_press:
      - lambda: get_cc1101(id(transciver))->begin_transmission();
      - remote_transmitter.transmit_raw:
          code: [429, -409, 408, -411, 435, -409, 412, -412, 410, -209, 214, -212, 213, -186, 212, -211, 210, -210, 209, -208, 208, -411, 206, -209, 411, -207, 209, -209, 209, -412, 408, -208, 210, -210, 209, -412, 408, -207, 210, -413, 207, -210, 413, -410, 410, -208, 212, -413, 411, -437, 412, -412, 411, -209, 193, -411, 427, -415, 416, -419, 420, -402, 429, -206, 208, -410, 206, -208, 411, -410, 410, -410, 435, -412, 410, -409, 410, -208, 215, -414, 424, -204, 212, -402, 415, -198, 218, -195, 224, -404, 431, -408, 409, -410, 435, -411, 410, -409, 409, -413, 414, -209, 213, -417, 210, -212, 213, -186, 212, -211, 210, -210, 209, -209, 410, -207, 210, -210, 208, -411, 206, -208, 209, -209, 209, -208, 208, -208, 208, -182, 436, -207, 209, -210, 208, -182, 233, -182, 233, -181, 233, -182, 233, -181, 233, -182, 233, -208, 208, -385, 230, -208, 208, -208, 208, -208, 208, -208, 208, -182, 233, -181, 436, -206, 208, -411, 206, -209, 209, -209, 411, -409, 207, -210, 210, -210, 412, -408, 207, -209, 413, -208, 210, -412, 409, -410, 233, -185, 418, -413, 413, -414, 438, -408, 210, -191, 411, -419, 416, -419, 421, -403, 430, -409, 206, -209, 411, -207, 209, -414, 408, -411, 436, -412, 411, -409, 410, -408, 235, -186, 418, -413, 236, -185, 417, -412, 210, -193, 214, -191, 436, -418, 416, -396, 424, -406, 431, -409, 409, -410, 435, -410, 209, -194, 413, -218, 190, -215, 214, -192, 217, -196, 224, -202, 205, -408, 230, -208, 208, -208, 410, -206, 209, -209, 208, -208, 208, -208, 207, -208, 208, -410, 206, -208, 208, -209, 208, -208, 208, -208, 207, -182, 234, -208, 207, -182, 233, -181, 233, -182, 435, -206, 208, -208, 208, -208, 208, -208, 208, -208, 207, -208, 208, -410, 205, -209, 410, -207, 209, -209, 209, -411, 409, -207, 210, -210, 211, -412, 408, -207, 210, -413, 207, -210, 412, -409, 410, -208, 219, -411, 413, -413, 410, -433, 413, -208, 190, -409, 440, -393, 420, -425, 402, -431, 408, -208, 210, -412, 206, -210, 412, -410, 409, -412, 436, -412, 410, -410, 409, -216, 214, -412, 415, -198, 218, -418, 400, -204, 232, -181, 233, -385, 431, -410, 409, -409, 436, -410, 410, -409, 412, -414, 439, -183]
      - delay: 120ms
      - remote_transmitter.transmit_raw:
          code: [441, -399, 439, -395, 418, -419, 421, -403, 430, -206, 208, -208, 208, -182, 233, -182, 233, -182, 233, -182, 233, -385, 230, -208, 411, -206, 209, -209, 209, -412, 408, -207, 210, -210, 210, -411, 409, -207, 211, -413, 206, -210, 413, -411, 410, -208, 211, -414, 435, -385, 436, -409, 412, -236, 186, -417, 413, -412, 411, -409, 434, -389, 428, -206, 213, -404, 220, -190, 434, -396, 424, -404, 432, -408, 409, -410, 435, -209, 193, -413, 430, -194, 215, -409, 197, -217, 418, -405, 431, -408, 408, -410, 435, -209, 193, -191, 214, -412, 440, -392, 419, -425, 402, -204, 233, -181, 233, -208, 208, -182, 233, -181, 233, -385, 230, -208, 208, -210, 209, -182, 436, -408, 408, -411, 436, -385, 436, -209, 212, -186, 212, -211, 211, -210, 210, -209, 208, -209, 207, -208, 208, -208, 208, -385, 230, -208, 208, -208, 209, -207, 208, -208, 208, -182, 233, -182, 436, -206, 208, -410, 206, -209, 209, -209, 411, -409, 207, -210, 236, -185, 413, -408, 207, -210, 413, -207, 210, -413, 408, -410, 234, -184, 415, -411, 437, -412, 411, -409, 235, -168, 435, -390, 440, -393, 418, -426, 402, -433, 205, -209, 411, -206, 209, -412, 409, -411, 436, -409, 412, -413, 411, -409, 209, -192, 436, -398, 220, -191, 434, -199, 223, -402, 429, -408, 409, -410, 411, -411, 234, -185, 212, -211, 414, -409, 436, -410, 411, -412, 209, -212, 213, -185, 212, -211, 211, -209, 209, -209, 411, -206, 209, -210, 210, -209, 208, -409, 407, -410, 409, -412, 437, -412, 209, -212, 213, -185, 211, -211, 209, -209, 209, -208, 208, -208, 208, -182, 234, -182, 435, -206, 209, -208, 208, -208, 208, -208, 208, -207, 208, -182, 233, -410, 206, -208, 410, -207, 209, -209, 209, -411, 408, -207, 210, -210, 211, -412, 408, -207, 211, -413, 207, -209, 413, -410, 410, -207, 212, -415, 411, -409, 436, -408, 410, -235, 190, -411, 413, -416, 417, -398, 425, -406, 431, -207, 209, -411, 206, -209, 413, -409, 409, -411, 436, -412, 413, -412, 411, -209, 215, -414, 399, -220, 190, -435, 197, -197, 424, -407, 431, -410, 409, -410, 436, -209, 192, -215, 190, -411, 440, -392, 419, -426, 428, -205, 208, -182, 233, -182, 233, -182, 233, -181, 233, -385]
      - delay: 120ms
      - remote_transmitter.transmit_raw:
          code: [419, -415, 419, -424, 401, -431, 406, -409, 408, -234, 184, -210, 210, -210, 209, -209, 208, -209, 209, -208, 208, -409, 206, -210, 412, -207, 210, -209, 209, -412, 408, -207, 210, -210, 210, -412, 409, -207, 210, -413, 207, -209, 413, -410, 410, -208, 212, -415, 410, -412, 436, -410, 411, -208, 192, -437, 401, -420, 415, -419, 420, -403, 429, -206, 207, -410, 206, -209, 411, -410, 409, -409, 437, -413, 413, -412, 411, -209, 191, -412, 440, -200, 214, -190, 216, -419, 402, -432, 408, -409, 410, -411, 437, -210, 212, -185, 212, -414, 409, -410, 435, -412, 413, -210, 212, -186, 212, -212, 210, -211, 209, -209, 208, -411, 206, -209, 234, -184, 412, -206, 208, -412, 408, -410, 435, -387, 436, -209, 193, -214, 214, -191, 214, -191, 214, -217, 219, -200, 201, -205, 205, -207, 233, -384, 230, -208, 208, -208, 208, -182, 234, -181, 234, -182, 233, -181, 435, -206, 208, -412, 206, -209, 209, -209, 411, -409, 206, -210, 237, -184, 412, -409, 206, -210, 413, -208, 210, -413, 409, -411, 234, -185, 415, -411, 435, -386, 436, -413, 237, -186, 417, -386, 436, -413, 413, -410, 410, -409, 237, -190, 411, -202, 213, -409, 417, -425, 402, -408, 433, -409, 410, -412, 234, -186, 415, -410, 234, -185, 218, -209, 414, -411, 413, -414, 413, -414, 412, -409, 237, -166, 236, -192, 434, -392, 418, -426, 427, -383, 231, -208, 208, -183, 235, -182, 233, -182, 234, -181, 436, -206, 208, -209, 208, -386, 231, -209, 411, -409, 410, -411, 435, -386, 235, -186, 239, -186, 212, -210, 209, -209, 209, -182, 234, -182, 234, -181, 234, -182, 436, -206, 209, -183, 234, -182, 234, -182, 233, -182, 232, -182, 233, -385, 230, -208, 411, -207, 209, -210, 209, -386, 433, -207, 210, -210, 211, -387, 434, -207, 210, -413, 206, -210, 412, -411, 410, -209, 211, -414, 409, -411, 436, -388, 438, -209, 213, -392, 436, -385, 438, -411, 410, -410, 434, -184, 240, -393, 210, -212, 417, -386, 438, -410, 413, -410, 435, -383, 438, -195, 213, -409, 417, -225, 201, -202, 203, -406, 432, -409, 410, -411, 436, -387, 437, -209, 192, -214, 213, -411, 415, -418, 421, -402, 427, -180, 234, -183, 234, -181, 234, -182, 233, -181, 234, -385]
      - lambda: get_cc1101(id(transciver))->end_transmission();
